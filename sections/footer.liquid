{% comment %}
  Footer section for WTF theme
{% endcomment %}

<footer class="footer color-{{ section.settings.color_scheme }} gradient section-{{ section.id }}-padding">
  <div class="footer__content-top page-width">
    {%- if section.blocks.size > 0 -%}
      <div class="footer__blocks-wrapper grid grid--1-col grid--2-col-tablet grid--{{ section.blocks.size }}-col-desktop">
        {%- for block in section.blocks -%}
          <div class="footer-block grid__item" {{ block.shopify_attributes }}>
            {%- case block.type -%}
              {%- when 'link_list' -%}
                {%- if block.settings.menu != blank -%}
                  <h2 class="footer-block__heading">{{ block.settings.heading | default: linklists[block.settings.menu].title }}</h2>
                  <ul class="footer-block__details-content list-unstyled">
                    {%- for link in linklists[block.settings.menu].links -%}
                      <li>
                        <a href="{{ link.url }}" class="link link--text list-menu__item list-menu__item--link">
                          {{ link.title }}
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}
              
              {%- when 'text' -%}
                <div class="footer-block__details-content rte">
                  {%- if block.settings.heading != blank -%}
                    <h2 class="footer-block__heading">{{ block.settings.heading }}</h2>
                  {%- endif -%}
                  {{ block.settings.subtext }}
                </div>
              
              {%- when 'image' -%}
                <div class="footer-block__details-content">
                  {%- if block.settings.image != blank -%}
                    {%- assign image_size_2x = block.settings.image_width | times: 2 | at_most: 5760 -%}
                    <img
                      srcset="{{ block.settings.image | img_url: block.settings.image_width }} 1x, {{ block.settings.image | img_url: image_size_2x }} 2x"
                      src="{{ block.settings.image | img_url: block.settings.image_width }}"
                      alt="{{ block.settings.image.alt | escape }}"
                      loading="lazy"
                      width="{{ block.settings.image.width }}"
                      height="{{ block.settings.image.height }}"
                      style="max-width: {{ block.settings.image_width }}px;"
                    >
                  {%- endif -%}
                </div>
            {%- endcase -%}
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}
  </div>

  <div class="footer__content-bottom">
    <div class="footer__content-bottom-wrapper page-width">
      <div class="footer__column footer__localization isolate">
        {%- if section.settings.enable_country_selector and localization.available_countries.size > 1 -%}
          <noscript>
            {%- form 'localization', id: 'FooterCountryFormNoScript', class: 'localization-form' -%}
              <div class="localization-form__select">
                <h2 class="visually-hidden" id="FooterCountryLabelNoScript">{{ 'localization.country_label' | t }}</h2>
                <select class="localization-selector link" name="country_code" aria-labelledby="FooterCountryLabelNoScript">
                  {%- for country in localization.available_countries -%}
                    <option value="{{ country.iso_code }}" {%- if country.iso_code == localization.country.iso_code %} selected{% endif %}>
                      {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                    </option>
                  {%- endfor -%}
                </select>
                <svg aria-hidden="true" focusable="false" viewBox="0 0 14 10">
                  <path d="m13 1-6 6-6-6" stroke="currentColor" stroke-width="2" fill="none" fill-rule="evenodd"/>
                </svg>
              </div>
              <button class="button button--tertiary">{{ 'localization.update_country' | t }}</button>
            {%- endform -%}
          </noscript>
        {%- endif -%}
        
        {%- if section.settings.enable_language_selector and localization.available_languages.size > 1 -%}
          <noscript>
            {%- form 'localization', id: 'FooterLanguageFormNoScript', class: 'localization-form' -%}
              <div class="localization-form__select">
                <h2 class="visually-hidden" id="FooterLanguageLabelNoScript">{{ 'localization.language_label' | t }}</h2>
                <select class="localization-selector link" name="locale_code" aria-labelledby="FooterLanguageLabelNoScript">
                  {%- for language in localization.available_languages -%}
                    <option value="{{ language.iso_code }}" {%- if language.iso_code == localization.language.iso_code %} selected{% endif %}>
                      {{ language.endonym_name | capitalize }}
                    </option>
                  {%- endfor -%}
                </select>
                <svg aria-hidden="true" focusable="false" viewBox="0 0 14 10">
                  <path d="m13 1-6 6-6-6" stroke="currentColor" stroke-width="2" fill="none" fill-rule="evenodd"/>
                </svg>
              </div>
              <button class="button button--tertiary">{{ 'localization.update_language' | t }}</button>
            {%- endform -%}
          </noscript>
        {%- endif -%}
      </div>
      
      <div class="footer__column footer__column--info">
        {%- if section.settings.copyright_text != blank -%}
          <div class="footer__copyright caption">
            <small class="copyright__content">&copy; {{ 'now' | date: "%Y" }} {{ section.settings.copyright_text }}</small>
          </div>
        {%- else -%}
          <div class="footer__copyright caption">
            <small class="copyright__content">&copy; {{ 'now' | date: "%Y" }}, {{ shop.name | link_to: routes.root_url }}</small>
          </div>
        {%- endif -%}
        
        {%- if section.settings.show_policy_links -%}
          <ul class="footer__list-social list-unstyled list list-social" role="list">
            {%- for policy in shop.policies -%}
              {%- if policy != blank -%}
                <li>
                  <a href="{{ policy.url }}" class="link">{{ policy.title }}</a>
                </li>
              {%- endif -%}
            {%- endfor -%}
          </ul>
        {%- endif -%}
      </div>
    </div>
  </div>
</footer>

<style>
  .footer {
    margin-top: auto;
    background-color: rgb(var(--color-base-background-2));
    border-top: 0.1rem solid rgba(var(--color-base-text), 0.08);
  }

  .footer__content-top {
    padding-top: 5rem;
    padding-bottom: 4rem;
  }

  .footer__content-bottom {
    border-top: 0.1rem solid rgba(var(--color-base-text), 0.08);
    padding-top: 2rem;
    padding-bottom: 2rem;
  }

  .footer__content-bottom-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .footer-block__heading {
    margin-bottom: 1.6rem;
    margin-top: 0;
    font-size: 1.6rem;
    line-height: calc(1 + 0.5 / var(--font-body-scale));
    font-weight: var(--font-heading-weight);
    letter-spacing: 0.06rem;
  }

  .footer-block__details-content {
    margin-bottom: 0;
  }

  .footer-block__details-content > * {
    margin: 0;
  }

  .footer-block__details-content .list-unstyled {
    margin-left: 0;
  }

  .footer-block__details-content .list-unstyled li {
    padding-left: 0;
    margin-bottom: 1rem;
  }

  .footer-block__details-content .list-unstyled li:last-child {
    margin-bottom: 0;
  }

  .footer__copyright {
    text-align: center;
  }

  .footer__list-social {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
  }

  @media screen and (max-width: 749px) {
    .footer__content-top {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }

    .footer__content-bottom-wrapper {
      flex-direction: column;
      text-align: center;
    }

    .footer__blocks-wrapper {
      grid-template-columns: 1fr;
      gap: 3rem;
    }
  }

  @media screen and (min-width: 750px) {
    .footer__blocks-wrapper {
      gap: 4rem;
    }
  }
</style>

{% schema %}
{
  "name": "Footer",
  "blocks": [
    {
      "type": "link_list",
      "name": "Link list",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "subtext",
          "label": "Text"
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "image_width",
          "min": 50,
          "max": 200,
          "step": 5,
          "unit": "px",
          "label": "Image width",
          "default": 100
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "Accent 1"
        },
        {
          "value": "accent-2",
          "label": "Accent 2"
        },
        {
          "value": "background-1",
          "label": "Background 1"
        },
        {
          "value": "background-2",
          "label": "Background 2"
        }
      ],
      "default": "background-2",
      "label": "Color scheme"
    },
    {
      "type": "header",
      "content": "Country/Region selector"
    },
    {
      "type": "checkbox",
      "id": "enable_country_selector",
      "default": true,
      "label": "Enable country/region selector"
    },
    {
      "type": "header",
      "content": "Language selector"
    },
    {
      "type": "checkbox",
      "id": "enable_language_selector",
      "default": true,
      "label": "Enable language selector"
    },
    {
      "type": "header",
      "content": "Footer information"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright text"
    },
    {
      "type": "checkbox",
      "id": "show_policy_links",
      "default": false,
      "label": "Show policy links"
    }
  ]
}
{% endschema %}

