{% comment %} templates/cart.liquid {% endcomment %}
{% if cart.item_count == 0 %}
  <div class="container">
    <h1>Your cart is empty</h1>
    <a href="/" class="back-link">Continue shopping</a>
  </div>
{% else %}
  <div class="container">
    <h1>Your Cart</h1>
    <form action="/cart" method="post" novalidate>
      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart.items %}
            <tr>
              <td>
                {{ item.title -}}
                <br>
                {% if item.properties and item.properties.size > 0 %}
                  <small>
                    {% for p in item.properties %}
                      {% unless p.last == blank %}
                        {{ p.first }}: {{ p.last -}}
                        <br>
                      {% endunless %}
                    {% endfor %}
                  </small>
                {% endif %}
              </td>
              <td><input type="number" name="updates[{{ item.key }}]" value="{{ item.quantity }}" min="0"></td>
              <td>{{ item.final_line_price | money }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <p><strong>Subtotal:</strong> {{ cart.total_price | money }}</p>
      {% if shop.taxes_included %}
        <p>Tax included.</p>
      {% else %}
        <p>Taxes and shipping calculated at checkout.</p>
      {% endif %}
      <button type="submit" name="update">Update</button>
      <button type="submit" name="checkout">Checkout</button>
    </form>
  </div>
{% endif %}
