{% comment %}
  Kava Drinks â€” Custom ordering page with proper variant handling
{% endcomment %}

{% assign product = all_products['custom-kava-drink'] %}

<script>
  // Set product data for AJAX cart functionality
  window.WTF_PRODUCT_HANDLE = 'custom-kava-drink';
  window.WTF_PRODUCT_JSON = {{ product | json }};
</script>

<main id="MainContent" class="page-width">
  <header class="wtf-page-hero" style="text-align:center; margin: 16px 0 20px;">
    <img
      src="{{ 'kava_drinks_150x150.png' | asset_url }}"
      alt="Kava Drinks"
      width="150"
      height="150"
      loading="eager"
      style="max-width:150px; height:auto;"
    >
    <h1 style="margin-top:10px;">Kava Drinks</h1>
    <p style="color:#555; margin-top: 6px;">Choose your size, strain, and flavors.</p>
  </header>

  {% render 'wtf-flavor-data' %}
  {% render 'wtf-flavor-options', title: 'Custom Kava Drink', flavors: wtfKavaFlavors, option_name: 'Flavor', product: product %}

  <form method="post" action="/cart/add" data-wtf-ajax style="margin-top:16px;">
    <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
    <div style="display:flex; gap:8px; align-items:center; margin-top:10px;">
      <label for="wtf-qty-kava" style="min-width:56px;">Qty</label>
      <input id="wtf-qty-kava" name="quantity" type="number" min="1" value="1" style="width:80px;">
      <button type="submit" class="wtf-primary-cta" style="margin-left:auto;">Add to cart</button>
    </div>
    <div id="wtf-price" data-price style="margin-top:8px; font-weight:600;"></div>
  </form>
</main>

<style>
  .wtf-primary-cta {
    background:#ff6600; color:#fff; border:none; border-radius:8px;
    padding:12px 16px; min-height:44px; font-weight:700; cursor:pointer;
  }
  .wtf-primary-cta:disabled { opacity:.6; cursor:not-allowed; }
</style>
